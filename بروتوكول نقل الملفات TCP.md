# بروتوكول التحكم بالنقل TCP





البروتوكول هو مجوعة من القواعد المعروفة مسبقاً والتي تحدد كيفية تبادل البيانات بين الأجهزة على الشبكة بغض النظر عن أي اختلافات بينها.

 وهذه القواعد تشمل كيفية بدء التبادل وشكل البيانات وتنسيقها وحجمها وأيضاً كيفية التعامل مع الحالات الكثيرة قبل وبعد وأثناء التبادل كالتأكد من وصولها وأمانها وما العمل في حال فقدان جزء منها وغير ذلك.   

لكن ماذا عن صديقنا لهذا اليوم، بروتوكول التحكم بالنقل TCP أو (Transmission Control Protocol): هو بروتوكول يوفر  اتصالاً موثوقاً لنقل البيانات بين جهازين على الشبكة. أي أنه يضمن وصول البيانات من المرسل الى المستقبل، ويضمن أيضاً ايصالها بالترتيب الصحيح. وهو يفعل هذا كله بالاعتماد على قناة اتصال غير موثوقة يوفرها بروتوكول آخر هو بروتوكول الشابكة (Internet Protocol - IP).

يأخذ بروتوكول التحكم بالنقل على عاتقه الكثير من تعقيدات التواصل في الشبكة ويخفيها عن تطبيقاتنا: كإعادة ارسال البيانات الضائعة والتحكم بالاحتقان(Congestion control) وتجنبه وسلامة البيانات وغير ذلك. فبروتوكول التحكم بالنقل حُسٍّن وطُوِّرَ بشكل أساسي من أجل الدقة وليس السرعة، وهذا الأمر يفتح علينا مجموعة من التحديات عندما نأتي الى تحسين أداء الويب.

لم تحدد معايير الـ HTTP بروتوكول التحكم بالنقل TCP كالبروتوكول النقل الوحيد ولا تلزم به، فيمكننا استخدام الـ UDP أو أي بروتوكول آخر لإيصال الـ HTTP، لكن عملياً، جميع حركات الـ HTTP عبر الشابكة تتم من خلال الـ TCP وذلك للمزايا الرائعة التي يقدمها.



### التصافح الثلاثي

جميع الاتصالات التي تتم باستخدام الـ TCP تبدأ بتصافح ثلاثي، حيث يجب على طرفي الاتصال -الخادم والعميل- الاتفاق على مجموعة من الأرقام والمتغيرات الخاصة بالاتصال قبل بدئه.



##### SYN

يقوم العميل باختيار رقم متسلسل "x" بشكل عشوائي، ثم يرسل حزمة SYN من كلمة (Syncronization) الى الخادم، ويمكن أيضاً أن تضمن الحزمة خيارات متغيرات أٌخرى تخص الـ TCP.



##### SYN ACK

يقوم الخادم بزيادة "X" ك ACK من كلمة (Acknowledgment) والتي تعني اشعار استلام، ثم يختار رقماً متسلسلاً خاص به "Y"، ويضيف ما يريد من خيارات ومتغيرات تخص الـ TCP ثم يرسل الرد.



##### ACK

يقوم العميل بزيادة الرقم المتسلسل الخاص بالخادم ثم ينهي التصافح الثلاثي بإرسال اشعار استلام الى ل

 