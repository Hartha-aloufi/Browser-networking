# التصفح الآمن



تحدثنا فيما سبق عن بروتوكولي النقل الـ TCP والـ UDP, ودائماً ما يقترن النقل والارسال بالسطو والاعترراض والتزييف, ويقترن أيضاً بالحماية والتشفير وتأمين ما ينقل. 

تقتصر مهمة بروتوكولات النقل فقط على نقل وايصال البيانات ولا تُعنى ابداً بتأمين المنقول أو حمايته.  فهذه مهمة إضافية توكل الى بروتوكول آخر وهو بروتوكول "أمن طبقة النقل" (Transport Layer Security).



تم البدء بتطوير بروتوكول الـ Secure Socket Layer- SSL- في شركة Netscape لتمكين العمليات التجارية على الشابكة (التجارة الالكترونية) والتي تتطلب تشفير وحماية معلومات العملاء والاستيثاق منهم (Authentication).  ضل الاصدار الاول من الـ SLL داخلياً في شركة نتسكيب وذلك لظهور مشاكل عدّة به الى أن ظهر الاصدار الثاني بسرعة لحل تلك المشاكل ومن ثم الاصدار الثالث. كان هناك شركات ومجموعات أُخرى تعمل أيضاً على إيجاد حلول لتشفير وتأمين الشابكة, كلٌ يعمل لوحده, مثل شركة مايكروسوفت وغيرها. الى أن تم توحيد العمل بين نتسكيب ومايكروسوفت ليخرج لنا بروتوكول أمن طبقة النقل -الـ  TLS- باصداره الاول سنة 1999. وفي الحقيقة لم يكن الـ TLS إلا بروتوكول الـ SLL الإصدار الثالث مع بعض التحسينات. أي SSL v3.1.



يتم عادةً استخدام مسميا الـ SSL والـ TLS للاشارة الى نفس الشيء, لكنهما عملياً مختلفان, بالطبع ليسا بروتوكولين مختلفين تماماً, لكنهما يشيران الى إصدارات مختلفة لبروتوكولٍ واحد.



استمرت التحديثات على بروتوكول الـ TLS لحل بعض المشاكل المكتشفة ولتحسين قدراته فظهر TLS 1.1 سنة 2006 ثم TLS 1.2 سنة 2008 ثم حديثاً TLS 1.3 سنة 2018.



### التشفير والإستيثاق وسلامة البيانات

صُمِّم بروتوكول أمن النقل الـ TLS ليقدم 3 خدمات للتطبيقات التي تستخدمه: التشفير والإستيثاق وسلامة البيانات, عملياً, لا يجبر على استخدام هذه الثلاث في كل الحالات, لكن تطبيق الويب الآمن يُسخِرُها كلَها.

##### التشفير:

هي آلية لتعمية ما يرسل بين طرفين. وقد كانت العرب تستخدم مصطلح التَعمية واستخراج المُعَمَّى بدل ما يعرف اليوم بالتشفير وفكه. 

##### الإستيثاق:

هي عملية التأكد من صلاحية وصحة الوثيقة المستخدمة لتعريف الهوية. 

##### سلامة البيانات:

هي آلية لكشف العبث والتزوير في البيانات والتأكد من سلامتها.



تم تصميم بروتوكول أمن طبقة النقل الـ TLS حيثُ يأتي بين طبقة التطبيق وطبقة النقل وبذلك فان بروتوكولات طبقة النقل لا تتأثر بالتشفير وبما يفعله الـ TLS فهو أمر لا يعنيها. لذلك فإن لدينا بروتوكول HTTPS وليس لدينا TLSS أو UDPS على سبيل المثال.



![TLS-Handshake](/home/hartha/Desktop/TLS-Handshake.svg)





سنتحدث باذن الله عن بروتوكول أمن النقل ببعض التفصيل, ونشمل:

1. التصافح (Handshake).
2. استئناف الجلسة (Session Resumption).
3. سلسلة الثقة (Chain of Trust) ومراجع التصديق (Certificate Authorities).
4. تحسين أداء الـ TLS.



### تصافح الـ TLS 

قبل فتح قناة اتصال آمنة بين طرفين, يجب أولاً أن يتفقا على عدّة أُمورٍ بينهما, وهذا دائماً هدف التصافح, وهو التهئية والإعداد للإتصال. فيجب على الطرفين الاتفاق على إصدار الـ TLS وخوارزمية التشفير (ciphersuite) وعلى المفاتيح التي ستستخدم في التشفير. وأيضاً يعطي بروتوكول الـ TLS لكلا طرفي الاتصال إمكانية التحقق من هويّة الآخر(الإستيثاق) كجزء من عملية التصافح. للأسف فكل واحدةٍ مما سبق تتطلب جولة كاملة(Round Trip), وهذا يزيد زمن الوصول لكل الإتصالات التي تستخدم الـ TLS.



![تصافح-بروتوكول-أمن-النقل](/home/hartha/Desktop/تصافح-بروتوكول-أمن-النقل.svg)





